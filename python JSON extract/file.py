import requests
import json
import random
from tqdm import tqdm

# Replace 'YOUR_ISBNS' with a list of ISBN values
isbns = [
    9780439785969,
    9780439358071,
    9780439554893,
    9780439655484,
    9780439682589,
    9780976540601,
    9780439827607,
    9780517226957,
    9780345453747,
    9781400052929,
    9780739322208,
    9780517149256,
    9780767908184,
    9780767915069,
    9780767910439,
    9780767903868,
    9780767903820,
    9780060920081,
    9780380713806,
    9780380727506,
    9780380715435,
    9780345538376,
    9780618517657,
    9780618346257,
    9780618260584,
    9780618391004,
    9780618510825,
    9780976694007,
    9780689840920,
    9781557344496,
    9780385326506,
    9781575606248,
    9781595580276,
    9781595962805,
    9780670059676,
    9780141312620,
    9780595321803,
    9781590301944,
    9780449146972,
    9780061159176,
    9780060762735,
    9780060749910,
    9780273704744,
    9781932386103,
    9780374517199,
    9780374280390,
    9780374519742,
    9780374522599,
    9780374518738,
    9780374522872,
    9780374519322,
    9780374516000,
    9780374520656,
    9780822205104,
    9780679734994,
    9781596670235,
    9781581807745,
    9780800793616,
    9780871202864,
    9780753454947,
    9780871209993,
    9781852402877,
    9780761129585,
    9780972016414,
    9781581805635,
    9780441294671,
    9780441102679,
    9780441172696,
    9780765306470,
    9780399128981,
    9780765353702,
    9780441328000,
    9780618212903,
    9780345410054,
    9780385732543,
    9780785260059,
    9780471780939,
    9780325001531,
    9780060762872,
    9780470045299,
    9780072262780,
    9780764569241,
    9780471933823,
    9780764559914,
    9780764584381,
    9780596523695,
    9780806523491,
    9780806525365,
    9780596527310,
    9780143035008,
    9780451528612,
    9780140449174,
    9780822001836,
    9781593080273,
    9780486437965,
    9781593081775,
    9780778322276,
    9780521313254,
    9780140183955,
    9780679767473,
    9781568491981,
    9780743270793,
    9780932863058,
    9780742508804,
    9780205358625,
    9781557344038,
    9780380720446,
    9780821925324,
    9780439271691,
    9780606105262,
    9780751506433,
    9780060786717,
    9780743499347,
    9780765313409,
    9781400032495,
    9781400032488,
    9781400032464,
    9780679732525,
    9780312424442,
    9780806930770,
    9780140366600,
    9780811201124,
    9780802130167,
    9780802131782,
    9780802151827,
    9780802151780,
    9780802151803,
    9780811201063,
    9780141439631,
    9781593080969,
    9781571290533,
    9781565842212,
    9780394743042,
    9781851681822,
    9781566562492,
    9780140195538,
    9780394431246,
    9780806501901,
    9780679439202,
    9780753453803,
    9781402714573,
    9781416500292,
    9780689854682,
    9780517221143,
    9781577658054,
    9780933121188,
    9780785950103,
    9780394800844,
    9780821778258,
    9780060733032,
    9788432216060,
    9780345413994,
    9780441788385,
    9780441748600,
    9780345316509,
    9780765314932,
    9780671742515,
    9780345455291,
    9780345476517,
    9780345368430,
    9781417622856,
    9780573650963,
    9780691122946,
    9780393329407,
    9780671867423,
    9780395883976,
    9780684848150,
    9780140156041,
    9780140119480,
    9780679722946,
    9780743244251,
    9780140179170,
    9780679722953,
    9781594201202,
    9780060930219,
    9780060931674,
    9780140283389,
    9780312423209,
    9780141180632,
    9780143039945,
    9780316724432,
    9780140189308,
    9781400043149,
    9780374522216,
    9780679754862,
    9780679752868,
    9780374521721,
    9780679754855,
    9780307264879,
    9780374529949,
    9780143039839,
    9780140097313,
    9780140097351,
    9780940650763,
    9780963188922,
    9780312426231,
    9780140115857,
    9780140154078,
    9780805081459,
    9780140178135,
    9780811214988,
    9782742741465,
    9780143036555,
    9780446579780,
    9780521386739,
    9780743203043,
    9780345438713,
    9780393318289,
    9781599869940,
    9780806519609,
    9780822549208,
    9780932813862,
    9780373792689,
    9780974514055,
    9780764585975,
    9780307281708,
    9780812969702,
    9780060255084,
    9780330485388,
    9781594130236,
    9780345360359,
    9780321430847,
    9783822840856,
    9780743264464,
    9780743236010,
    9780553572490,
    9780060589462,
    9780802789471,
    9780688060695,
    9781859605158,
    9781592530878,
    9780451528803,
    9780192833983,
    9780486451381,
    9780452011878,
    9780451163080,
    9780452286757,
    9780451163936,
    9780452281257,
    9780451187840,
    9780451147950,
    9780452274044,
    9780471791430,
    9780553803815,
    9780375755194,
    9781592283194,
    9780975599518,
    9780374502003,
    9780307263940,
    9780312405540,
    9780195170139,
    9781400079490,
    9780688171629,
    9780060932688,
    9781400034956,
    9780307350428,
    9780307350442,
    9781400034543,
    9781400095803,
    9780375708114,
    9780861714926,
    9781843535843,
    9781740594776,
    9788408064763,
    9781740592055,
    9780618710539,
    9780060512804,
    9782228894166,
    9780060733353,
    9780060593087,
    9780553383447,
    9780380816033,
    9780553380965,
    9780553383430,
    9780060833183,
    9780553380958,
    9781880685358,
    9781880685334,
    9780465067107,
    9780465051366,
    9780465067091,
    9780898709193,
    9780060887964,
    9780061122415,
    9781421504605,
    9781591169253,
    9781421504599,
    9781591169208,
    9781591169291,
    9780060192501,
    9781591169239,
    9780812974614,
    9781587157394,
    9780142000670,
    9780060554736,
    9780142401200,
    9780808553038,
    9781400096893,
    9780739326220,
    9780099498186,
    9781557046833,
    9780099771517,
    9780743430593,
    9781932664393,
    9780521750844,
    9780802415318,
    9781416524793,
    9788495618771,
    9780972859899,
    9780307277671,
    9780767926034,
    9782266144346,
    9781416524809,
    9780552151764,
    9780593055076,
    9780786016068,
    9780671015206,
    9781585424337,
    9781932429237,
    9780977616657,
    9781563410901,
    9780345479174,
    9780451205360,
    9781419349997,
    9781400098033,
    9780743226721,
    9780140481396,
    9780226014906,
    9781416500186,
    9780310258971,
    9780060838584,
    9780141006871,
    9780812968064,
    9780385340540,
    9780394720241,
    9780345480606,
    9780060193393,
    9781579546014,
    9780972018418,
    9780471743675,
    9780471430452,
    9780805431575,
    9780679838869,
    9780373250714,
    9780140143454,
    9780802732293,
    694055000612,
    9780307238276,
    9781400052585,
    9780307346582,
    9781400052387,
    9780609609972,
    9781400052370,
    9780061234002,
    9788466625128,
    9780061245138,
    9780399153594,
    9780156030205,
    9780828808392,
    9780140285970,
    9780307276902,
    9781411677319,
    9780061171468,
    9780787968335,
    9780446394598,
    9780131494848,
    9780316861014,
    9780060574215,
    9780060192778,
    9780061232053,
    9780735200302,
    9780553381672,
    9780517542026,
    9780393324815,
    9780744005615,
    9780140280197,
    9780553383683,
    9780553295412,
    9780812590104,
    9780385516419,
    9780553381399,
    9780553382044,
    9780446691437,
    9780826413017,
    9780811701648,
    9780140442755,
    9780192802774,
    9780140449747,
    9780879756321,
    9781890318239,
    9780872207882,
    9780801435300,
    9780872204621,
    9780140449044,
    9780140449082,
    9780140446388,
    9780879757779,
    9780192824257,
    9780140440348,
    9780393959468,
    9780375400612,
    9780226327709,
    9780140275360,
    9780872203525,
    9780374529055,
    9780147712554,
    9780140447941,
    9780451527370,
    9780872205420,
    9780143039952,
    9780374525743,
    9780060931957,
    9780140449112,
    9780451527363,
    9780865165847,
    9780674995833,
    9781891190230,
    9780192837684,
    9781558321250,
    9780141000589,
    9780517092941,
    9780521618748,
    9781557831576,
    9780062512796,
    9780062513342,
    9780060527983,
    9780060832810,
    9780061122095,
    9780060930134,
    9780061124266,
    9780140714548,
    9780764586033,
    9780764585685,
    9780879232153,
    9780674991200,
    9780872201682,
    9780674991224,
    9780872203945,
    9780393971675,
    9780674991873,
    9780929524351,
    9780226307800,
    9780226307848,
    9780226307831,
    9781590171806,
    9780553213638,
    9780226307824,
    9780226307817,
    9780140449297,
    9780674995604,
    9780521643863,
    9780140447262,
    9780195125986,
    9780413752802,
    9780486424620,
    9780393325836,
    9780192832603,
    9780674995338,
    9780195061666,
    9780674995666,
    9780195145663,
    9780715631874,
    9780822004240,
    9780674995741,
    9780674996007,
    9780715629949,
    9780226307664,
    9780226307787,
    9780226307947,
    9780195135923,
    9780140443332,
    9780872203907,
    9780140441123,
    9780374527051,
    9780812216271,
    9780226307640,
    9780521539814,
    9781400041923,
    9780812216714,
    9780486292427,
    9781419150012,
    9780226307862,
    9780452011670,
    9780451527844,
    9780156027649,
    9780140444254,
    9780872205857,
    9780679431329,
    9780140440287,
    9780192835888,
    9781580495936,
    9780451621603,
    9780521617352,
    9781416500339,
    9780452007178,
    9780415907446,
    9780553213430,
    9780812234565,
    9780872203617,
    9780140448146,
    9781585100873,
    9780199120093,
    9780674995376,
    9780140441529,
    9780156027656,
    9780674995963,
    9780198721598,
    9780451616227,
    9780198140818,
    9780872206038,
    9780140443325,
    9780521774338,
    9781400032716,
    9780316156509,
    9780743482776,
    9780743271325,
    9780142000281,
    9781576751725,
    9788433924636,
    9788433968777,
    9781862076655,
    9788433924711,
    9788433924629,
    9780321317100,
    9780321365200,
    9788432216428,
    9781565480841,
    9780679783190,
    9781565481244,
    9780520227576,
    9780024021502,
    9780872201866,
    9780143035985,
    9780192854520,
    9781565482012,
    9780060934910,
    9788466308953,
    9780156001267,
    9780140447897,
    9780393058109,
    9780806128948,
    9780806114569,
    9780814317327,
    9780674992559,
    9780520242609,
    9780674990470,
    9780674990463,
    9780814326114,
    9780806115603,
    9780691015972,
    9780195143102,
    9780195143737,
    9780130158857,
    9781857150605,
    9780226301198,
    9780521315791,
    9780521011761,
    9780521479349,
    9781585424832,
    9780767907439,
    9780743233217,
    9780743270601,
    9780393061314,
    9780865475090,
    9780385486804,
    9780785268833,
    9780743246989,
    9780446579674,
    9780515142396,
    9780439227148,
    9780375825385,
    9781591583660,
    9780805063899,
    9780394417752,
    9780140268683,
    9780140137347,
    9780140251579,
    9780192802385,
    9780143036234,
    9780486440910,
    9781593083243,
    9781400032808,
    9780375752674,
    9780385494786,
    9780679783619,
    9780374292799,
    9788427032224,
    9780898868098,
    9780590422673,
    9780451529305,
    9781402714580,
    9780439101363,
    9780517221167,
    9781931082730,
    9781904633273,
    9780743487603,
    9781593081386,
    9781586633523,
    9781593080556,
    9781857151435,
    9780671792275,
    9781405228183,
    9780517093399,
    9780375760051,
    9780451530042,
    9780671882365,
    9780670030774,
    9780140436143,
    9780465031269,
    9780060183073,
    9780822533894,
    9780439321624,
    9780826452320,
    9780747584667,
    9780765342515,
    9780765342539,
    9780765342522,
    9780413772787,
    9781420926712,
    9780198144960,
    9780521834346,
    9781573921336,
    9780198145042,
    9781853991141,
    9781883011086,
    9781883011079,
    9780375415029,
    9780394758268,
    9780394757650,
    9780394758282,
    9780394757681,
    9780812970401,
    9780452286870,
    9781421501567,
    9780563524748,
    9780670034727,
    9780684824710,
    9780142003848,
    9780262540377,
    9780465073511,
    9780387987200,
    9780262540421,
    9780553345841,
    9780553103748,
    9780553804362,
    9780553802023,
    9780762419227,
    9780465081981,
    9780393324464,
    9780380707638,
    9780691050843,
    9780060977108,
    9780713484076,
    9780316281331,
    9780452282315,
    9780452278875,
    9780451191151,
    9780446618762,
    9780060793197,
    9781400051571,
    9780312425029,
    9780312424084,
    9780316172325,
    9780849945113,
    9780743422079,
    9780517147689,
    9780452286535,
    9780517118290,
    9780192832979,
    9780192802637,
    9780972121798,
    9780743564366,
    9780764586606,
    9780679731368,
    9780140435825,
    9780192836229,
    9780140448009,
    9780140447972,
    9780226735191,
    9780312422158,
    9780743270755,
    9780743223133,
    9781574671322,
    9780142437117,
    9780393311334,
    9780142437780,
    9780764553028,
    9780471773863,
    9780452281325,
    9780684842233,
    9780684839370,
    9780072920963,
    9780938497196,
    9780671708634,
    9780743250979,
    9780671887179,
    9781932073201,
    9780915811236,
    9780425179611,
    9780306814556,
    9780671869205,
    9781400096916,
    9780679600855,
    9780345478207,
    9780449007389,
    9780679745648,
    9780739333648,
    9780684868769,
    9780446671828,
    9780813527406,
    9780684842578,
    9780940450318,
    9781883011949,
    9780940450530,
    9780486420493,
    9780689304576,
    9780440802501,
    9780307236012,
    9781597770071,
    9780618056996,
    9780618083558,
    9780395291306,
    9780618574995,
    9780618009367,
    9780140272925,
    9780670910618,
    9780140271577,
    9780198111849,
    9780815319665,
    9780671792763,
    9780671447540,
    9780684813639,
    9780844662923,
    9780743262132,
    9780451188458,
    9780761452423,
    9788466305136,
    9789626343586,
    9780763630188,
    9780143058090,
    9781593080181,
    9780415247719,
    9780192781536,
    9780919123700,
    9780192741561,
    9780252063022,
    9780700607426,
    9780515139730,
    9780515121490,
    9780061020612,
    9780812967050,
    9781854583529,
    9780862921477,
    9780674996236,
    9780393977615,
    9780141439976,
    9780743487733,
    9781571741028,
    9780439436540,
    9781842124024,
    9780812970753,
    9780141441115,
    9780307264893,
    9780824512590,
    9781400083114,
    9780156007757,
    9780156001410,
    9780156010597,
    9780156013031,
    9780156005203,
    9780156028790,
    9780156004015,
    9781860465024,
    9788466312806,
    9788466314749,
    9788466306799,
    9780156006248,
    9789587043648,
    9780890093894,
    9780001000391,
    9780394448046,
    9780143036388,
    9780141182674,
    9780375711169,
    9783829602266,
    9780679725404,
    9780143034544,
    9780807744680,
    9780195137897,
    9780071460828,
    9780316346627,
    9780786887170,
    9780060521998,
    9780141439563,
    9780393960693,
    9780664241582,
    9780060935467,
    9780060888695,
    9780061205699,
    9780761501664,
    9780486287591,
    9781416500391,
    9781556434952,
    9780192834423,
    9781931082303,
    9781931082884,
    9781883011093,
    9780140424386,
    9780192833600,
    9780140422344,
    9780812000399,
    9780198711551,
    9780140444087,
    9780671475024,
    9780395290316,
    9780140150810,
    9780142001615,
    9780689834196,
    9780618446889,
    9780394755267,
    9780553580075,
    9780805202410,
    9780300115864,
    9781568813073,
    9780747546559,
    9781558745155,
    9780805061833,
    9780007179817,
    9780415283045,
    9780684832401,
    9780060838652,
    9781565848269,
    9781565847255,
    9780500203477,
    9780822318644,
    9780395740101,
    9780060913076,
    9780425181645,
    9780307237200,
    9780940895485,
    9780440936855,
    9780877887263,
    9780671686901,
    9780877880202,
    9780062545039,
    9780521639873,
    9780385092104,
    9781419154072,
    9780140433395,
    9780907129073,
    9780195114157,
    9781400150687,
    9780060734015,
    9780439271714,
    9780618654796,
    9780525464822,
    9781559704649,
    9780786902064,
    9780452284937,
    9780385415606,
    9780525949787,
    9780452283206,
    9780452284449,
    9783471772539,
    9781857093315,
    9781421506135,
    9781591164418,
    9781421506128,
    9781421502717,
    9781421504032,
    9784088736211,
    9784088736716,
    9784088736525,
    9780373028603,
    9780307277763,
    9783257228007,
    9780747534938,
    9780140105834,
    9780747566755,
    9784088732138,
    9782723442275,
    9780440410256,
    9780440229353,
    9780440419679,
    9780306801457,
    9780156001458,
    9780385321983,
    9780375757327,
    9780141439822,
    9780393964523,
    9780689844089,
    9781587263880,
    9780486404882,
    9780520238954,
    9781555176808,
    9781883011888,
    9780142437179,
    9780486443225,
    9780375757372,
    9780393020397,
    9780486406640,
    9780520242456,
    9780553211955,
    9780060955427,
    9780940450738,
    9780060594527,
    9781589199507,
    9780671019877,
    9780517189603,
    9780451528834,
    9781402713194,
    9780142437056,
    9780142437018,
    9780879237905,
    9780060277406,
    9780465081455,
    9780465002603,
    9781594030864,
    9780465081431,
    9780465037384,
    9780465081424,
    9780744520057,
    9780916856595,
    9781893007161,
    9780960989867,
    9780395530078,
    9780618479030,
    9780374529383,
    9780374525750,
    9780374504847,
    9780878054909,
    9780374521028,
    9780822219750,
    9783458334224,
    9781420925432,
    9780451521415,
    9780811202107,
    9780141441481,
    9780486424545,
    9780393310320,
    9780156286510,
    9780141183350,
    9780385314695,
    9781594200939,
    9780439847797,
    9780439651417,
    9780439651400,
    9780380777587,
    9781860460586,
    9780750000338,
    9780750005944,
    9782253933212,
    9780750012638,
    9780750002462,
    9780750002424,
    9781420926842,
    9780300044881,
    9780486427591,
    9780674993389,
    9780872203600,
    9781420927320,
    9780226307756,
    9780312304355,
    9781416600305,
    9781840466386,
    9780553383829,
    9780743217187,
    9780070013568,
    9780060816193,
    9780061161537,
    9780060951306,
    9780060951276,
    9780060591717,
    9780060535032,
    9780571219766,
    9783518399606,
    9780750002448,
    9780399239984,
    9780679643357,
    9780345448194,
    9780140275018,
    9780345455826,
    9780345448149,
    9780140298512,
    9780399234767,
    9781890447175,
    9780613359603,
    9780141185477,
    9780321344755,
    9780060987329,
    9780679763970,
    9780156030489,
    9780060984380,
    9780060184124,
    9780815412182,
    9780060837556,
    9780060510855,
    9780380710843
]


book_data_array = []


def fetch_book_data(isbn):
    url = f'http://openlibrary.org/api/books?bibkeys=ISBN:{isbn}&format=json&jscmd=data'

    try:
        response = requests.get(url)
        data = response.json()

        if f'ISBN:{isbn}' in data:
            book_info = data[f'ISBN:{isbn}']
            # Generate a random 3-digit price
            price = round(random.uniform(100, 999), 2)
            book_data = {
                'title': book_info.get('title', ''),
                'authors': [author['name'] for author in book_info.get('authors', [{'name': ''}])],
                'price': price,
                'genre': ' '.join(subject['name'] for subject in book_info.get('subjects', [{'name': ''}])),
                'description': book_info.get('excerpts', [{'text': ''}])[0]['text'],
                'language': book_info.get('languages', [{'key': 'English'}])[0]['key'],
                'publicationDate': book_info.get('publish_date', ''),
                'imageUrl': book_info.get('cover', {}).get('medium', ''),
            }

            book_data_array.append(book_data)
        else:
            print(f'Book not found for ISBN: {isbn}')
    except Exception as e:
        print(f'Error fetching data for ISBN {isbn}: {e}')


def fetch_all_book_data():
    # Create a loading bar with tqdm
    with tqdm(total=len(isbns), desc="Fetching Book Data") as pbar:
        for isbn in isbns:
            fetch_book_data(isbn)
            pbar.update(1)  # Update the loading bar

    # Export the collected book data as JSON
    with open('book_data.json', 'w', encoding='utf-8') as json_file:
        json.dump(book_data_array, json_file, ensure_ascii=False, indent=4)


fetch_all_book_data()
print('Data saved to book_data.json')
